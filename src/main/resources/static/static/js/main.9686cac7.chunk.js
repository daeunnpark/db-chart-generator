(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,a){},245:function(e,t,a){e.exports=a(329)},250:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),s=a.n(r),l=(a(250),a(45)),i=a(48),c=a(46),d=a(49),u=(a(148),a(38)),p=a(61),h=a.n(p),m=a(186),f=a.n(m);a(251)(h.a),a(252)(h.a);var g="Source: kaggle",b={chart:{type:"column"},title:{text:"Bar Chart"},subtitle:{text:""},xAxis:{visible:!1,categories:[]},yAxis:{visible:!1,min:0,tickInterval:1,title:{text:"count(person)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:0,borderWidth:1,groupPadding:.2,shadow:!1}},series:[{showInLegend:!1,colorByPoint:!0,data:[]}],lang:{noData:"No Data to Display"},noData:{style:{fontWeight:"bold",fontSize:"15px",color:"#303030"}}},y={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Pie Chart"},subtitle:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{colorByPoint:!0,data:[]}],lang:{noData:"No Data to Display"},noData:{style:{fontWeight:"bold",fontSize:"15px",color:"#303030"}}},C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).parseData=function(e){var t=a.countFrequency(e.data);return{newColumn:e.column,newCategories:Object.keys(t),newBarChartData:Object.values(t),newPieChartData:a.parseData_helper(t)}},a.parseData_helper=function(e){var t=[];return Object.keys(e).forEach(function(a){var n;n={name:a,y:e[a]},t.push(n)}),t},a.countFrequency=function(e){for(var t={},a=0;a<e.length;a++){var n=e[a];t[n]=t[n]?t[n]+1:1}return t},a.setChartData=function(e,t,n,o){a.setState({barChart:{title:{text:e},subtitle:{text:g},xAxis:{visible:!0,categories:t},yAxis:{visible:!0},series:[{name:e,data:n}]},pieChart:{title:{text:e},subtitle:{text:g},series:[{name:e,data:o}]}})},a.state={barChart:b,pieChart:y},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){if(console.log("ttttt"),e!==this.props){console.log("rrrrr");var t=this.parseData(this.props),a=t.newColumn,n=t.newCategories,o=t.newBarChartData,r=t.newPieChartData;this.setChartData(a,n,o,r)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"Section"},o.a.createElement("h2",null,"Charts"),o.a.createElement("div",{className:"chartContainer"},o.a.createElement(f.a,{highcharts:h.a,options:this.state.barChart})),o.a.createElement("div",{className:"chartContainer"},o.a.createElement(f.a,{highcharts:h.a,options:this.state.pieChart})))}}]),t}(n.Component),v=a(64),w=a(187),E=a.n(w),D=a(198),S=a(212),O=a(138),k=a.n(O),j=a(207),x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value})},a.search=function(e){console.log(a.state.value),fetch("/db/search/?keyword=".concat(a.state.value),{credentials:"include",method:"GET"}).then(function(e){return!!e.ok&&e.json()}).then(function(e){return console.log(e),a.props.setSearchResult(a.state.value,e),e}).catch(function(e){window.alert("There has been a problem with your fetch operation: "+e.message)})},a.iconClick=function(e){a.setState({value:""}),a.props.resetSearchResult()},a.render=function(){return o.a.createElement("div",{style:{display:"inline-flex",margin:15}},o.a.createElement("div",{style:{marginRight:20,marginBottom:10}},o.a.createElement(S.a,{id:"standard-name",label:"keyword",onChange:a.handleChange,value:a.state.value,InputProps:{endAdornment:o.a.createElement(j.a,{position:"end"},o.a.createElement(k.a,{onClick:a.iconClick}))}})),o.a.createElement("div",{style:{alignSelf:"center"}},o.a.createElement(D.a,{variant:"outlined",color:"inherit",onClick:a.search,disabled:a.props.disabled},"Search")))},a.state={value:"",disabled:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({value:this.props.keyword})}}]),t}(n.Component),T=a(239),A=a.n(T),R=a(200),P=a(202),B=a(203),L=a(204),N=a(227),F=a(208),I=a(178),U=a(175),W=a(205),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleChange=function(e){a.setState({value:e.target.value})},a.handleOpen=function(){a.setState({open:!0})},a.handleOk=function(){a.setState({open:!1}),a.props.setSelectedCategoryData(a.state.value)},a.handleClose=function(){a.setState({open:!1})},a.render=function(){return o.a.createElement("div",null,o.a.createElement(D.a,{id:"updateChartsBtn",variant:"contained",color:"secondary",onClick:a.handleOpen,className:"Btn",disabled:a.props.disabled}," Update Charts"),o.a.createElement(R.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:a.state.open,onClose:a.handleClose},o.a.createElement(L.a,null,"Choose a category to generate charts."),o.a.createElement(B.a,null,o.a.createElement("form",null,o.a.createElement(U.a,{component:"fieldset"},o.a.createElement(I.a,{component:"legend"},"Category"),o.a.createElement(F.a,{"aria-label":"Category",name:"category",value:a.state.value,onChange:a.handleChange},a.props.columns.map(function(e){return o.a.createElement(W.a,{key:e.field,value:e.field,control:o.a.createElement(N.a,null),label:e.title})}))))),o.a.createElement(P.a,null,o.a.createElement(D.a,{onClick:a.handleClose,color:"primary"},"Cancel"),o.a.createElement(D.a,{onClick:a.handleOk,color:"primary"},"Ok"))))},a.state={open:!1,value:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({columns:this.props.columns})}}]),t}(n.Component),q=a(172),H=a(209),J=a(183),M=a(241),_=a.n(M),G=a(240),K=[a.n(G).a,_.a],V=K,$={marginRight:10},Q=[{backgroundColor:"blue",display:"flex",alignItems:"center"},{backgroundColor:"red",display:"flex",alignItems:"center"}],X={display:"flex",alignItems:"center"},Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1})},a.render=function(){return o.a.createElement("div",null,o.a.createElement(H.a,{anchorOrigin:{vertical:a.state.vertical,horizontal:a.state.horizontal},open:a.state.open,autoHideDuration:3e3,onClose:a.handleClose},a.messageWrapper()))},a.state={open:!1,vertical:"top",horizontal:"center",message:"",success:null,flag:0},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(null!==this.props.success&&e!==this.props){var a=this.props.success?"Database has been successfully updated.":"Error in the database. Please try again.",n=this.props.success?0:1;this.setState({message:a,open:!0,flag:n})}}},{key:"messageWrapper",value:function(){var e=V[this.state.flag],t=Q[this.state.flag];return o.a.createElement(J.a,{style:t,message:o.a.createElement("span",{id:"client-snackbar",style:X},o.a.createElement(e,{style:$}),this.state.message),action:[o.a.createElement(q.a,{key:"close","aria-label":"close",color:"inherit",onClick:this.handleClose},o.a.createElement(k.a,null))]})}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).parseCsv=function(e){A.a.parse(e.target.files[0],{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:a.updateTable})},a.parseData_table=function(e){var t=[],a=[];return console.log(e.meta.fields),console.log(e.data),e.meta.fields.forEach(function(e){t.push({title:e.toUpperCase(),field:e.toLowerCase(),cellStyle:ee})}),t[0].editable="onAdd",e.data.forEach(function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);a.push(t)}),console.log(t),console.log(a),{newColumns:t,newData:a}},a.updateTable=function(e){var t=a.parseData_table(e),n=t.newColumns,o=t.newData;a.setState({isLoading:!0}),a.addAllDataToDb(o).then(function(e){e?(a.setState({columns:n,data:o,dataCopy:o}),console.log(o),console.log(a.state.data),console.log("copy is"),console.log(a.state.dataCopy),a.setAlert(!0),a.setState({isLoaded:!0})):a.setAlert(!1),a.setState({isLoading:!1})})},a.addAllDataToDb=function(e){return fetch(new Request("/db/addAll",{method:"POST",redirect:"follow",headers:new Headers({"Content-Type":"application/json"})}),{credentials:"include",body:JSON.stringify(e)}).then(function(e){return!!e.ok}).catch(function(e){window.alert("There has been a problem with your fetch operation: "+e.message)})},a.addDataToDb=function(e){return fetch(new Request("/db/add",{method:"POST",redirect:"follow",headers:new Headers({"Content-Type":"application/json"})}),{credentials:"include",body:JSON.stringify(e)}).then(function(e){return!!e.ok}).catch(function(e){window.alert("There has been a problem with your fetch operation: "+e.message)})},a.updateDataInDb=function(e){return fetch(new Request("/db/update",{method:"PUT",redirect:"follow",headers:new Headers({"Content-Type":"application/json"})}),{credentials:"include",body:JSON.stringify(e)}).then(function(e){return!!e.ok}).catch(function(e){window.alert("There has been a problem with your fetch operation: "+e.message)})},a.deleteDataFromDb=function(e){return fetch(new Request("/db/delete",{method:"DELETE",redirect:"follow",headers:new Headers({"Content-Type":"application/json"})}),{credentials:"include",body:JSON.stringify(e)}).then(function(e){return!!e.ok}).catch(function(e){window.alert("There has been a problem with your fetch operation: "+e.message)})},a.setSelectedCategoryData=function(e){var t=[];a.state.data.forEach(function(a){t.push(a[e])}),t.sort(a.compare),a.props.setChartData({column:e.toUpperCase(),data:t})},a.setAlert=function(e){a.setState({success:e}),a.setState({success:null})},a.setSearchResult=function(e,t){a.setState({keyword:e,data:t}),console.log(a.state.page)},a.resetSearchResult=function(){a.setState({data:a.state.dataCopy,keyword:""})},a.render=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"DB chart generator"),o.a.createElement("div",{className:"Section"},o.a.createElement("input",{id:"contained-button-file",type:"file",accept:".csv",onChange:a.parseCsv}),o.a.createElement("label",{htmlFor:"contained-button-file"},o.a.createElement(D.a,{id:"uploadBtn",variant:"contained",color:"primary",component:"span"},"Upload CSV File")),o.a.createElement("h2",null,"Database Table"),o.a.createElement(E.a,{options:{showTitle:!1,search:!1,toolbarButtonAlignment:"left",headerStyle:ee,addRowPosition:"first",emptyRowsWhenPaging:!1},isLoading:a.state.isLoading,columns:a.state.columns,data:a.state.data,editable:{onRowAdd:function(e){return new Promise(function(t,n){setTimeout(function(){a.addDataToDb(e).then(function(o){if(o){console.log(e);var r=a.state.data;console.log(r);var s=a.state.dataCopy;console.log(s),console.log(r),console.log(s),a.setState({data:r,dataCopy:s},function(){return t()}),a.setAlert(!0)}else n(),a.setAlert(!1)})},1e3)})},onRowUpdate:function(e,t){return new Promise(function(n,o){setTimeout(function(){a.updateDataInDb(e).then(function(r){if(r){console.log(t);var s=a.state.data,l=s.indexOf(t);s[l]=e;var i=a.state.dataCopy,c=i.findIndex(function(e){return e.passengerid==t.passengerid});console.log(c),i[c]=e,console.log("index ="+c),console.log(s),console.log(i),a.setState({data:s,dataCopy:i},function(){return n()}),a.setAlert(!0)}else o(),a.setAlert(!1)})},1e3)})},onRowDelete:function(e){return new Promise(function(t,n){setTimeout(function(){a.deleteDataFromDb(e).then(function(o){if(o){console.log(e),console.log(e.passengerid);var r=a.state.data,s=r.indexOf(e);console.log(s),r.splice(s,1);var l=a.state.dataCopy,i=l.findIndex(function(t){return t.passengerid==e.passengerid});console.log("index ="+i),console.log(r),console.log(l),a.setState({data:r,dataCopy:l},function(){return t()}),a.setAlert(!0)}else n(),a.setAlert(!1)})},1e3)})}},localization:{header:{actions:""},body:{emptyDataSourceMessage:"No Data to Display"}},components:{Toolbar:function(e){return o.a.createElement("div",{style:{display:"flex",padding:"10px 0"}},o.a.createElement("div",null,o.a.createElement(w.MTableToolbar,Object.assign({},e,{classes:{root:"my-temp-class"}}))),o.a.createElement("div",{style:{borderRadius:"5px",margin:"auto"}},o.a.createElement(x,{keyword:a.state.keyword,setSearchResult:a.setSearchResult.bind(Object(v.a)(a)),resetSearchResult:a.resetSearchResult.bind(Object(v.a)(a)),disabled:!a.state.isLoaded})))}}}),o.a.createElement(z,{columns:a.state.columns,setSelectedCategoryData:a.setSelectedCategoryData,disabled:!a.state.isLoaded})),o.a.createElement(Y,{success:a.state.success}))},a.state={columns:[],data:[],isLoading:!1,isLoaded:!1,success:null,dataCopy:[],keyword:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"compare",value:function(e,t){return"number"==typeof e?e-t:e>t?1:t>e?-1:0}}]),t}(n.Component),ee={padding:"0 8px"},te=Z,ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this))).setChartData=function(e){a.setState(e)},a.render=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"App"},o.a.createElement(te,{setChartData:a.setChartData}),o.a.createElement(C,{column:a.state.column,data:a.state.data})))},a.state={column:[],data:[]},a}return Object(d.a)(t,e),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[245,1,2]]]);
//# sourceMappingURL=main.9686cac7.chunk.js.map